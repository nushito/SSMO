@model ProductsDetailsViewModel
<h5>Products Details</h5>
<form method="get">
     <div class="row">
        <div class="form-group col-md-4">
            <label asp-for="ProductsNums">Choose Product</label>
            <select asp-for="ProductsNums" name="ProductsNums" class="form-control">
                <option value="">All</option>
                @foreach (var product in Model.ProductsName)
                {
                    <option value="@product.ProductId">@product.FullName</option>  
                }
            </select>
        </div>
       </div>
       <div class="row">
        <div class="form-group col-md-4">
            <label asp-for="MyCompanyId">Select Company</label>
            <select asp-for="MyCompanyId" class="form-control">
                <option value="">All</option>
                    @foreach (var company in Model.MyCompanies)
                    {
                       <option value="@company.Id">@company.Name</option>
                    }
            </select>
        </div>
    </div>   
    <div>
        <input type="submit" class="btn btn-info mr-1" value="Search"/> 
        <a class="btn btn-success text-capitalize border-0" data-mdb-ripple-color="dark" asp-controller="Reports" asp-action="ExportProductDetails"><i
              class="fas fa-print text-primary"></i> Download</a>
    </div>
    <hr />
</form>
@{
    var previouspage = Model.CurrentPage - 1;
    if (previouspage < 1)
    {
        previouspage = 1;
    }

    var maxpage = Math.Ceiling((double)Model.TotalProducts / ProductsDetailsViewModel.productsPerPage);
}
<div class="row mb-5">
    <div class="col-md-6">
        <a class="btn btn-primary @(Model.CurrentPage == 1 ? "disabled" : string.Empty)"
           asp-controller="Reports"
           asp-action="Products"
           asp-route-currentPage="@previouspage"
           asp-route-productId="@Model.ProductsNums"
           asp-route-myCompanyId="@Model.MyCompanyId"><<</a>
    </div>

    @{
        var shouldButtonBeDisabled = Model.CurrentPage == maxpage ||
                             Model.Products == null;
    }

    <div class="col-md-6">
        <a class="btn btn-primary float-sm-right @(shouldButtonBeDisabled ? "disabled" : string.Empty)" style="margin-top: 10px"
           asp-controller="Reports"
           asp-action="Products"
           asp-route-currentPage="@(Model.CurrentPage + 1)"
           asp-route-productId="@Model.ProductsNums"
           asp-route-myCompanyId="@Model.MyCompanyId">>></a>
    </div>
</div>
@{
    int i = 1;   
}
<table class="table">
    <thead style="position: sticky;top: 0" class="thead-dark">
        <tr>
            <th>#</th>
            <th>Supplier</th>  
            <th>Purchase Invoice </th>
            <th>Date</th>
            <th>SupplierOrderNumber</th>
            <th>Unit</th>
            <th>Purchased Quantity</th>
            <th>Pallets</th>
            <th>Sheets/pallet</th>
            <th>Autstanding Quantity</th>
            <th>Fsc Claim</th>
            <th>Fsc Certificate</th>
            <th>Purchase Price</th>
            <th>Curency</th>
            <th>Cost Price</th>
            <th>Cost Price Currency</th>
            <th>Loading Address</th>
            <th>Delivery Address</th>
        </tr>
    </thead>
    <tbody>
        @if(Model.Products.Products != null)
        {
            @foreach(var product in Model.Products.Products)
            {
                int j = 1;
               <tr class="table-success" >
                     <td>@i</td>    
                     <td>@product.SupplierName</td>
                     <td>@product.PurchaseInvoice</td>
                     <td>@product.Date</td>
                     <td>@product.SupplierOrderNumber</td>
                     <td>@product.Unit</td>
                     <td>@product.Quantity</td>
                     <td>@product.Pallets</td>
                     <td>@product.SheetsPerPallet</td>
                     <td>@product.AutstandingQuantity</td>
                     <td>@product.FscClaim</td>
                     <td>@product.FscCertificate</td>
                     <td>@product.PurchasePrice</td>
                     <td>@product.Currency</td>
                     <td>@product.CostPrice</td>
                     <td>@product.CostPriceCurrency</td>
                     <td>@product.LoadingAddress</td>
                     <td>@product.DeliveryAddress</td>
                </tr>
                <tr>
                    <th colspan="17" >
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Customer Name</th>
                                    <th>Document Type</th>
                                    <th>Invoice No:</th>
                                    <th>Credit/Debit to Invoice No:</th>
                                    <th>Date</th>
                                    <th>Order Confirmation No:</th>
                                    <th>Customer PO No:</th>
                                    <th>Unit</th>
                                    <th>Quantity</th>
                                    <th>Pallets</th>
                                    <th>Sheets/Pallet</th>
                                    <th>Fsc Claim</th>
                                    <th>Fsc Certificate</th>
                                    <th>Sell Price</th>
                                    <th>Currency</th>
                                    <th>Profit</th>
                                    <th>Loading Address</th>
                                    <th>Delivery Address</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var soldProduct in product.SellDetails)
                                {
                                   <tr style="font-weight:100">
                                        <td>@(i).@j</td>
                                        <td>@soldProduct.CustomerName</td>
                                        <td>@soldProduct.Type</td>
                                        <td>@soldProduct.InvoiceNumber</td>
                                        <td>@soldProduct.CreditOrDebitToInvoiceNumber</td>
                                        <td>@soldProduct.Date</td>
                                        <td>@soldProduct.OrderConfirmationNumber</td>
                                        <td>@soldProduct.CustomerPoNumber</td>
                                        <td>@soldProduct.Unit</td>
                                        <td>@soldProduct.Quantity</td>
                                        <td>@soldProduct.Pallets</td>
                                        <td>@soldProduct.SheetsPerPallet</td>
                                        <td>@soldProduct.FscClaim</td>
                                        <td>@soldProduct.FscCertificate</td>
                                        <td>@soldProduct.SellPrice</td>
                                        <td>@soldProduct.Currency</td>
                                        <td>@soldProduct.Profit</td>
                                        <td>@soldProduct.LoadingAddress</td>
                                        <td>@soldProduct.DeliveryAddress</td>
                                    </tr>
                                    j++;
                                }
                            </tbody>
                        </table>
                    </th>
                </tr>
                i++;
            }
        }
    </tbody>
</table>