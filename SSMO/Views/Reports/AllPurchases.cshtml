@model PurchaseInvoisecBySupplierModel

@{
    ViewBag.Title = "Purchase Invoices";   
}
<form class="get">
    <div class="row">
        <div class="col-3">
             <label asp-for="Supplier">Select Supplier</label>
             <select asp-for="Supplier" class="form-control">
             <option value="">All</option>
                @foreach (var supplier in Model.Suppliers)
                {
                <option value="@supplier">@supplier</option>
                }
             </select>
        </div>
         <div class="form-group col-3" >
             <label asp-for="StartDate" >Start Date</label>
             <div class="input-group date" id="datepicker1">
                 <input asp-for="StartDate" type="date" class="form-control" data-date-format="dd-mm-yyyy" value="@DateTime.Now.ToString("dd-MM-yyyy")"/> 
                 <span asp-validation-for="StartDate" class="glyphicon glyphicon-calendar"></span>
             </div>            
        </div>
         <div class="form-group col-3"  >
             <label asp-for="EndDate" >End Date</label>
             <div class="input-group date" id="datepicker2">
                <input asp-for="EndDate"  type="date" class="form-control" data-date-format="dd-mm-yyyy" value="@DateTime.Now.ToString("dd-MM-yyyy")"/> 
                <span asp-validation-for="EndDate" class="glyphicon glyphicon-calendar"></span>
             </div>
        </div>
    </div>
    <hr />
    <div class="row">
         <input type="submit" class="btn btn-info" value="Search"/>
    </div>   
<br />
</form>
<hr />

@{
    var previousPage = Model.CurrentPage - 1;

    if (previousPage < 1)
    {
        previousPage = 1;
    }

    var maxPage = Math.Ceiling((decimal)Model.TotalPurchaseInvoices / PurchaseInvoisecBySupplierModel.PurchaseInvoicesPerPage);
}
<div class="row mb-5">
    <div class="col-md-6">
        <a class="btn btn-primary @(Model.CurrentPage == 1 ? "disabled" : string.Empty)"
        asp-controller="Reports"
        asp-action="AllPurchase"
        asp-route-currentPage="previousPage"
        asp-route-supplierName="@Model.Supplier"
        asp-route-startDate="@Model.StartDate"
        asp-route-endDate ="@Model.EndDate"><<</a>
    </div>
    @{
        var shouldButtonBeDisabled = Model.CurrentPage == maxPage || Model.InvoiceCollection == null;
    }
    <div class="col-md-6">
        <a class="btn btn-primary @(shouldButtonBeDisabled ? "disable" : string.Empty)"
        asp-controller="Reports"
        asp-action="AllPurchase"
        asp-route-currentPage="@Model.CurrentPage+1"
        asp-route-supplierName="@Model.Supplier"
        asp-route-startDate="@Model.StartDate"
        asp-route-endDate ="@Model.EndDate">>></a>
    </div>
</div>
<hr />

<div class="table-responsive">
    <table class="table">
    <thead>
        <tr>
            <th>
                Supplier Name
            </th>
            <th>
                Invoice No
            </th>
            <th>
                Date
            </th>
             <th>
                Amount
            </th>
            <th>
                Delivery Terms
            </th>
            <th>
                Truck/Container No
            </th>           
            <th>
                Supplier Order No
            </th>
           @* <th>
                Customer Name
            </th>
            <th>
                Customer OC
            </th>*@
        </tr>
    </thead>
    <tbody>
            @if(Model.InvoiceCollection != null)
            {
                @foreach (var item in Model.InvoiceCollection)
                {
                        <tr>
                             <td class="col-sm-1">
                            @item.SupplierName
                            </td>
                            <td class="col-sm-1">
                            @item.PurchaseNumber
                            </td>
                            <td class="col-sm-1">
                            @item.Date
                            </td>
                             <td class="col-sm-1">
                            @item.TotalAmount
                            </td>
                            <td class="col-sm-1">
                            @item.Incoterms
                            </td>
                             <td class="col-sm-1">
                            @item.TruckNumber
                            </td>
                            <td class="col-sm-1">
                            @item.SupplierOrderNumber
                            </td>
                          @* <td class="col-sm-1">
                            @item.CustomerName
                            </td>
                             <td class="col-sm-1">
                            @item.OrderConfirmationNumber
                            </td>*@
                            <td>
                               <a asp-controller="Reports" asp-action="PurchaseInvoiceDetails" asp-route-id="@item.Id" class="btn btn-info mr-1">Details</a>
                            </td>
                            <td> 
                                <a asp-controller="Reports" asp-action="EditPurchase" asp-route-id="@item.Id" class="btn btn-outline-info mr-1">Edit</a>
                            </td>                 

                        </tr>
                } 
            }            
    </tbody>
</table>
</div>


<script type="text/javascript">
    $(function () {       
        $("#datepicker1").datepicker({
            
        });
        $("#datepicker2").datepicker({
            
        });

        var inputdate1= $('#datepicker1').datepicker().value();
        var inputdate2= $('#datepicker2').datepicker().value();
        if (new Date(inputdate1) > new Date(inputdate2))
        {
                alert(" Your alert message !");
        }
    });
</script>

@section Scripts {
        <partial name="_ValidationScriptsPartial" />
}
