@model TransportCompanyOrdersCollectionForPaymentsViewModel

<h5>Service/Transport Orders Payment Report</h5>

<form method="get">
    <div class="row m-2">
    <label>Select Company</label>
    <select asp-for="Company">
        <option value="">-</option>
            @foreach (var item in Model.TransportCompanies)
            {
                <option value="@item.Id">@item.Name</option>
            }
    </select>
</div>
<div class="row col-md-3 m-2">
    <label>Start Date</label>
    <input asp-for="StartDate" type="date" class="form-control" data-date-format="dd-mm-yyyy" value="@DateTime.Now.ToString("dd-MM-yyyy")"/>
</div>
<div class="row col-md-3 m-2">
    <label>End Date</label>
    <input asp-for="EndDate" type="date" class="form-control" data-date-format="dd-mm-yyyy" value="@DateTime.Now.ToString("dd-MM-yyyy")"/>
</div>
 <div class="row">
        <input type="submit" class="btn btn-info" value="Search" />
    </div>
</form>

@if(Model.CompanyCollectionDetails != null){
    <table class="table">
        <thead>
            <tr>
                <th>Order No:</th>
                <th>Date</th>
                <th>Paid by</th>
                <th>Amount</th>
                <th>Balance</th>
                <th>Currency</th>
                <th>Loading address</th>
                <th>Delivery Address</th>
                <th>Customer Order</th>
                <th>Supplier Order</th>
                <th>Payments</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var order in Model.CompanyCollectionDetails)
            {
                <tr>
                    <td>@order.Number</td>
                    <td>@order.Date.Date.ToShortDateString()</td>
                    <td>@order.Payer</td>
                    <td>@order.AmountAfterVat</td>
                    <td>@order.Balance</td>
                    <td>@order.Currency</td>
                    <td>@order.LoadingAddress</td>
                    <td>@order.DeliveryAddress</td>
                    <td>@order.OrderConfirmationNumber</td>
                    <td>@order.SupplierOrderNumber</td>
                    <td>
                        @if(order.TransportPayments != null)
                        {
                            foreach (var payment in order.TransportPayments)
                            {
                                @payment.Amount <p>-</p> @payment.Date;
                            }
                        }
                    </td>
                    <th><a asp-controller="Reports" asp-action="AddServiceOrderPayment" asp-route-orderConfirmationNumber="@order.Number" class="btn btn-outline-info mr-1">Add Payment</a></th> 
                </tr>
            }

        </tbody>
    </table>
}