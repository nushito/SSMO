@model ProductsFscCollectionViewModel

@{
    ViewBag.Title = "FSC Report";   
}
<form class="get">
    <div class="row">
        <div class="col-3">
             <label asp-for="MyCompanyId">Company</label>
             <select asp-for="MyCompanyId" class="form-control">
             <option value="">All</option>
                @foreach (var company in Model.MyCompanies)
                {
                    <option value="@company.Id">@company.Name</option>
                }
             </select>
        </div>
        <div>
            <label asp-for="FSCClaim"> Fsc Claim </label>
            <select asp-for="FSCClaim" class="form-control">
                <option value="">All</option>
                @foreach (var claim in Model.FscClaims)
                {
                    <option value="@claim">@claim</option>
                }
            </select>
        </div>
         <div class="form-group col-3" >
             <label asp-for="StartDate" >Start Date</label>
             <div class="input-group date" id="datepicker1">
                 <input asp-for="StartDate" type="date" class="form-control" data-date-format="dd-mm-yyyy" value="@DateTime.Now.ToString("dd-MM-yyyy")"/> 
                 <span asp-validation-for="StartDate" class="glyphicon glyphicon-calendar"></span>
             </div>            
        </div>
         <div class="form-group col-3"  >
             <label asp-for="EndDate" >End Date</label>
             <div class="input-group date" id="datepicker2">
                <input asp-for="EndDate"  type="date" class="form-control" data-date-format="dd-mm-yyyy" value="@DateTime.Now.ToString("dd-MM-yyyy")"/> 
                <span asp-validation-for="EndDate" class="glyphicon glyphicon-calendar"></span>
             </div>
        </div>
        <div>
            <label asp-for="PurchaseOrSell"></label>
            <select asp-for="PurchaseOrSell">
                <option value="">Please select</option>
                <option value="Purchase">Purchase</option>
                <option value="Sell">Sell</option>
            </select>
        </div>
    </div>
    <hr />
    <div class="row">
         <input type="submit" class="btn btn-info mr-1" value="Search"/><a class="btn btn-success text-capitalize border-0" data-mdb-ripple-color="dark" asp-controller="Reports" asp-action="ExportFscToExcel"><i
              class="fas fa-print text-primary"></i> Download</a>
    </div>   
<br />
</form>
<hr />

@{
    var previousPage = Model.CurrentPage - 1;

    if (previousPage < 1)
    {
        previousPage = 1;
    }

    var maxPage = Math.Ceiling((decimal)Model.TotalProducts / PurchaseInvoisecBySupplierModel.PurchaseInvoicesPerPage);
}
<div class="row mb-5">
    <div class="col-md-6">
        <a class="btn btn-primary @(Model.CurrentPage == 1 ? "disabled" : string.Empty)"
        asp-controller="Reports"
        asp-action="FscReport"
        asp-route-currentPage="previousPage"
        asp-route-myCompany="@Model.MyCompanyId"
        asp-route-startDate="@Model.StartDate"
        asp-route-endDate ="@Model.EndDate"
        asp-route-purchaseOrSell = "@Model.PurchaseOrSell"><<</a>
    </div>
    @{
        var shouldButtonBeDisabled = true;
        if(Model.PurchaseOrSell == "Purchase")
        {
           shouldButtonBeDisabled = Model.CurrentPage == maxPage || Model.PurchaseProducts == null;
        }
        else
        {
            shouldButtonBeDisabled = Model.CurrentPage == maxPage || Model.SoldProducts == null;
        }

        
    }
    <div class="col-md-6">
        <a class="btn btn-primary @(shouldButtonBeDisabled ? "disable" : string.Empty)"
        asp-controller="Reports"
        asp-action="AllPurchase"
        asp-route-currentPage="@Model.CurrentPage+1"
        asp-route-myCompany="@Model.MyCompanyId"
        asp-route-startDate="@Model.StartDate"
        asp-route-endDate ="@Model.EndDate"
        asp-route-purchaseOrSell = "@Model.PurchaseOrSell">>></a>
    </div>
</div>
<hr />
<div class="table-responsive">
    <table class="table">
        @if(Model.PurchaseOrSell == "Purchase")
        {
            if (Model.PurchaseProducts != null)
            {
                foreach (var product in Model.PurchaseProducts)
                {
                <thead>
                        <tr>
                            <th>
                                Supplier Name
                            </th>
                            <th>
                                Invoice No/Date
                            </th>                   
                            <th>
                                Description
                            </th>
                            <th>
                                Fsc Claim
                            </th>
                            <th>
                                Purchase Quantity
                            </th>
                            <th>
                                Unit
                            </th>
                            <th>
                                Transport
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-sm-1">
                    @product.SupplierName
                            </td>
                            <td class="col-sm-1">
                    @product.PurchaseInvoice/@product.PurchaseDate
                            </td>
                            <td class="col-sm-1">
                    @product.Description
                            </td>
                            <td class="col-sm-1">
                    @product.FscClaim
                            </td>
                            <td class="col-sm-1">
                    @product.Quantity
                            </td>
                            <td class="col-sm-1">
                    @product.Unit
                            </td>
                            <td class="col-sm-1">
                    @product.Transport
                            </td>
                        </tr>
                    </tbody>

                }
            }
        }
        else if(Model.PurchaseOrSell == "Sell")
        {
            if (Model.SoldProducts != null)
            {
                foreach (var product in Model.SoldProducts)
                {
                <thead>
                        <tr>
                            <th>
                                Customer Name
                            </th>
                            <th>
                                Invoice No/Date
                            </th>
                            <th>
                                Description
                            </th>
                            <th>
                                Fsc Claim
                            </th>
                            <th>
                                Quantity
                            </th>
                            <th>
                                Unit
                            </th>
                            <th>
                                Transport
                            </th>
                            <th>
                                Supplier
                            </th>
                            <th>
                                Purchase Invoice
                            </th>
                        </tr>

                    </thead>
                    <tbody>
                        <tr>
                            <td class="col-sm-1">
                                @product.CustomerName
                            </td>
                            <td class="col-sm-1">
                    @product.InvoiceNumber/@product.Date
                            </td>
                            <td class="col-sm-1">
                    @product.Description
                            </td>
                            <td class="col-sm-1">
                    @product.FscClaim
                            </td>
                            <td class="col-sm-1">
                    @product.Quantity
                            </td>
                            <td class="col-sm-1">
                    @product.Unit
                            </td>
                            <td class="col-sm-1">
                    @product.Transport
                            </td>
                            <td class="col-sm-1">
                    @product.Supplier
                            </td>
                            <td class="col-sm-1">
                    @product.PurchaseInvoice
                            </td>
                        </tr>
                    </tbody>
                }
            }
        }       
    </table>
</div>